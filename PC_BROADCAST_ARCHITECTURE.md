# 🖥️ PC 방송 송출 아키텍처 설계

## 🎯 시나리오 분석

### 현재 상황

**하드웨어 구성:**
- PC가 RJ-45(또는 오디오 케이블)로 방송 장비에 연결
- PC의 사운드 카드 출력이 방송 장비로 전송됨
- PC에서 오디오를 재생하면 방송 장비로 출력됨

**목표:**
- 관리자가 웹에서 스케줄 설정
- 설정된 시간에 PC에서 자동으로 오디오 재생
- 방송 장비로 자동 출력

---

## 💡 두 가지 접근 방법

### 방법 1: 엔드포인트 방식 (현재 태블릿 PC 방식)

**작동 방식:**
1. PC에 웹 서버 설치 (예: Node.js Express, PHP)
2. 엔드포인트 URL 설정 (예: `http://PC_IP:3000/api/broadcast`)
3. `execute-schedules` 함수가 오디오를 엔드포인트로 POST 요청
4. PC의 엔드포인트가 오디오를 받아서 저장
5. PC의 플레이어가 오디오를 재생

**장점:**
- ✅ 실시간 전송 가능
- ✅ 네트워크를 통한 직접 전송
- ✅ 태블릿 PC와 동일한 구조

**단점:**
- ⚠️ PC에 웹 서버 설치 필요
- ⚠️ PC IP 주소 고정 필요
- ⚠️ 방화벽 설정 필요

---

### 방법 2: 자동 다운로드 및 재생 방식 (권장)

**작동 방식:**
1. PC에 플레이어 앱/웹페이지 실행
2. 플레이어가 주기적으로 서버에서 오디오 목록 확인
3. 새로운 오디오 발견 시 다운로드
4. PC에서 자동으로 오디오 재생
5. 사운드 카드를 통해 방송 장비로 출력

**장점:**
- ✅ PC에 웹 서버 설치 불필요
- ✅ PC IP 주소 고정 불필요
- ✅ 방화벽 설정 간단
- ✅ 구현 간단

**단점:**
- ⚠️ 폴링 간격에 따른 지연 가능 (10초)

---

## 🚀 추천 방법: 자동 다운로드 및 재생

### 이유

1. **구현 간단**
   - PC에 웹 서버 설치 불필요
   - 기존 태블릿 PC 플레이어와 유사한 구조

2. **유지보수 용이**
   - PC 재시작 시 자동 실행만 설정
   - 네트워크 설정 간단

3. **확장성**
   - 여러 PC에서 동시 사용 가능
   - 채널별로 다른 PC 연결 가능

---

## 📋 구현 방법

### 1. PC용 플레이어 생성

**옵션 A: 웹 기반 플레이어 (간단)**

- 태블릿 PC 플레이어와 동일한 구조
- 브라우저에서 실행
- PC 재시작 시 자동 실행 설정

**옵션 B: 데스크톱 앱 (안정적)**

- Electron 앱 또는 네이티브 앱
- PC 재시작 시 자동 실행
- 시스템 트레이에서 실행

### 2. 오디오 재생

**HTML5 Audio API 사용:**
```javascript
const audio = new Audio(audioUrl);
audio.play();
```

**시스템 오디오 출력:**
- PC의 기본 사운드 카드로 출력
- 방송 장비로 자동 전송

---

## 🔧 구현 예시

### PC용 웹 플레이어 (태블릿 PC 플레이어와 유사)

**파일:** `api/broadcast/player-pc.html`

**기능:**
- 주기적으로 오디오 목록 확인 (10초마다)
- 새로운 오디오 발견 시 다운로드 및 재생
- PC의 사운드 카드를 통해 방송 장비로 출력

**사용법:**
1. PC에서 브라우저 열기
2. `http://localhost:8000/player-pc.html` 접속
3. 자동 재생 시작

---

## 📊 비교표

| 항목 | 엔드포인트 방식 | 자동 다운로드 방식 |
|------|----------------|-------------------|
| **구현 복잡도** | 높음 (웹 서버 필요) | 낮음 (플레이어만) |
| **PC 설정** | 웹 서버 설치, IP 고정 | 브라우저 실행만 |
| **방화벽** | 포트 개방 필요 | 불필요 |
| **실시간성** | 즉시 전송 | 10초 지연 가능 |
| **유지보수** | 복잡 | 간단 |
| **확장성** | 제한적 | 우수 |

---

## ✅ 추천 구현

### 단계별 구현

1. **PC용 플레이어 생성**
   - 태블릿 PC 플레이어 기반
   - PC 환경에 맞게 최적화

2. **자동 실행 설정**
   - Windows: 시작 프로그램에 추가
   - 브라우저 자동 실행 설정

3. **테스트**
   - PC에서 플레이어 실행
   - 스케줄 생성 및 자동 재생 확인

---

**어떤 방식으로 구현하시겠습니까?** 🚀

1. **자동 다운로드 방식** (권장) - 간단하고 유지보수 용이
2. **엔드포인트 방식** - 실시간 전송 필요 시

