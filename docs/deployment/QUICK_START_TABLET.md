# 🚀 태블릿 PC 방송 송출 빠른 시작 가이드

## 📋 시나리오

**목표:** 관리자가 웹에서 스케줄 설정 → 태블릿 PC가 자동으로 재생 → 방송 장비로 출력

---

## ✅ 구현 완료 파일

### 서버 파일 (Hostinger 업로드 필요)

1. **`list.php`** - 오디오 목록 조회 API
2. **`audio.php`** - 오디오 파일 다운로드 API  
3. **`player.html`** - 태블릿 PC 플레이어

### 업로드 위치

```
public_html/tts/api/broadcast/
├── index.php      (기존 - 오디오 수신)
├── list.php       ← 새로 추가
├── audio.php      ← 새로 추가
└── player.html    ← 새로 추가
```

---

## 🔧 설정 방법

### 1단계: 파일 업로드 (Hostinger)

1. Hostinger File Manager 접속
2. `public_html/tts/api/broadcast/` 폴더로 이동
3. 다음 파일 업로드:
   - `list.php`
   - `audio.php`
   - `player.html`

### 2단계: 태블릿 PC 설정

1. **태블릿 PC에서 브라우저 열기**
   - Chrome, Safari 등 권장

2. **플레이어 페이지 접속**
   ```
   https://nanum.online/tts/api/broadcast/player.html
   ```

3. **화면 고정 (선택사항)**
   - Android: 설정 → 앱 → Chrome → 화면 고정
   - iOS: 설정 → 화면 시간 → 앱 제한

4. **방송 장비 연결**
   - RJ-45 케이블 또는 오디오 케이블로 연결

### 3단계: 테스트

1. **관리자 (웹 서비스)**
   - 스케줄 관리 → 새 스케줄 생성
   - 전송 채널: `https://nanum.online/tts/api/broadcast/`
   - 시간: 5분 후로 설정

2. **태블릿 PC 확인**
   - 플레이어 페이지 상태 확인
   - "대기 중..." 또는 "재생 중..." 표시 확인

3. **자동 송출 확인**
   - 설정된 시간에 오디오 전송
   - 태블릿 PC가 자동으로 재생
   - 방송 장비로 출력

---

## 🎯 작동 원리

### 1. 관리자 설정
```
웹 서비스 → 스케줄 생성 → 채널 선택 → 시간 설정
```

### 2. 자동 실행 (1분마다)
```
Supabase Edge Function → 스케줄 확인 → 오디오 전송
```

### 3. 서버 저장
```
Hostinger 서버 → 오디오 수신 → audio/ 폴더 저장
```

### 4. 태블릿 PC 확인 (10초마다)
```
플레이어 페이지 → list.php 호출 → 최신 오디오 확인
```

### 5. 자동 재생
```
새 오디오 발견 → audio.php로 다운로드 → HTML5 Audio 재생 → 방송 장비 출력
```

---

## 📝 체크리스트

### 파일 업로드
- [ ] `list.php` 업로드
- [ ] `audio.php` 업로드  
- [ ] `player.html` 업로드
- [ ] 파일 권한 644 확인

### 태블릿 PC
- [ ] 브라우저 설치
- [ ] 플레이어 페이지 접속
- [ ] 상태 메시지 확인 ("대기 중..." 또는 "재생 중...")
- [ ] 화면 고정 설정 (선택사항)

### 방송 장비
- [ ] RJ-45 또는 오디오 케이블 연결
- [ ] 출력 확인

### 테스트
- [ ] 스케줄 생성
- [ ] 자동 송출 확인
- [ ] 태블릿 PC 재생 확인

---

## 💡 주요 기능

### 태블릿 PC 플레이어 (`player.html`)

- ✅ **자동 확인**: 10초마다 새로운 오디오 확인
- ✅ **자동 재생**: 새로운 오디오 발견 시 자동 재생
- ✅ **상태 표시**: "대기 중...", "재생 중...", "연결 오류" 등
- ✅ **오디오 목록**: 최근 오디오 목록 표시
- ✅ **수동 제어**: 수동 확인 및 폴링 제어 버튼

### 오디오 목록 API (`list.php`)

- ✅ **최신 우선**: 수정 시간순으로 정렬
- ✅ **제한 옵션**: `limit` 파라미터로 개수 제한
- ✅ **상세 정보**: 파일명, URL, 크기, 수정 시간 제공

### 오디오 다운로드 API (`audio.php`)

- ✅ **보안**: 파일명 검증 (경로 문자 제거)
- ✅ **MIME 타입**: 파일 확장자에 따라 자동 설정
- ✅ **캐시**: 브라우저 캐싱 지원

---

## 🚨 문제 해결

### 태블릿 PC가 오디오를 재생하지 않음

1. **플레이어 페이지 확인**
   - 상태가 "대기 중..." 인지 확인
   - 오디오 목록이 표시되는지 확인

2. **서버 확인**
   - `list.php` 직접 접속하여 오디오 목록 확인
   - `audio/` 폴더에 파일이 있는지 확인

3. **네트워크 확인**
   - 태블릿 PC 인터넷 연결 확인
   - 방송 장비와 네트워크 연결 확인

### 오디오가 재생되지 않음

1. **브라우저 확인**
   - 브라우저 콘솔에서 오류 메시지 확인
   - 자동 재생 설정 확인 (일부 브라우저는 사용자 상호작용 필요)

2. **오디오 파일 확인**
   - `audio.php?file=broadcast_xxx.mp3` 직접 접속하여 다운로드 확인
   - 파일이 손상되지 않았는지 확인

3. **방송 장비 확인**
   - 오디오 출력이 방송 장비로 연결되어 있는지 확인
   - 볼륨 설정 확인

---

## 📚 추가 자료

- **상세 가이드**: `TABLET_SETUP_GUIDE.md`
- **구현 계획**: `TABLET_PLAYER_IMPLEMENTATION.md`
- **시나리오 설명**: `TABLET_BROADCAST_SCENARIO.md`

---

**이제 파일을 업로드하고 태블릿 PC에서 플레이어 페이지를 열어 테스트해보세요!** 🚀

